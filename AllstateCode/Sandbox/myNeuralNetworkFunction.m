function [y1] = myNeuralNetworkFunction(x1)
%MYNEURALNETWORKFUNCTION neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 21-Nov-2017 10:23:55.
%
% [y1] = myNeuralNetworkFunction(x1) takes these arguments:
%   x = Qx31 matrix, input #1
% and returns:
%   y = Qx1 matrix, output #1
% where Q is the number of samples.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [1;1;20;0;0;0.1;0;0;1;41;0;0;0;0;0;3.4;17;0.7;0.9;1;0.85714;90;1;0;1;1;0.1;0;0;0.6858;1];
x1_step1.gain = [0.0186915887850467;1;0.00308641975308642;0.00714285714285714;0.0104166666666667;0.28169014084507;0.000766871165644172;0.0508905852417303;0.0135135135135135;0.0017683465959328;0.121212121212121;0.000408163265306122;0.002002002002002;0.00131319763624425;0.000963391136801541;0.166666666666667;0.000200360649168503;0.294117647058824;0.173913043478261;0.00809716599190283;0.0147991540211595;0.181818181818182;2;0.196850393700787;2;0.000474721101352955;0.00146530881383252;0.166666666666667;0.02;0.78740157480315;0.00276243093922652];
x1_step1.ymin = -1;

% Layer 1
b1 = [0.031706103788809447686;-0.061859988080999780968;0.0073188546976458799392;-0.26697233258657804278;0.0025633596844145557087;0.78424467197280411934;2.3481614792647529377;2.3363332619980075044;-0.067984212868428872678;0.4816603423025014874];
IW1_1 = [-0.045315508427337183872 0.088076920905493766289 -0.069163038795111111967 0.016142061338321807284 0.00026099854680767067307 -0.0773773786702351557 0.02172322957465705473 0.024473059772878547752 0.058894954847903926987 0.047183137859667302616 0.036742031396044788627 0.020205994317745473721 -0.0048760863527935868408 0.01962101730882899811 0.018650787134903531322 -0.046287309139535361135 0.049318614533443085046 0.061525026770029460355 -0.0056247634723634804335 -0.04564835724495239222 0.025599346904589440066 0.09009052893181701549 0.4830314529366784293 0.021391363132781272133 -0.21054812078136614373 0.025946422868670226264 0.032342607211903101616 -0.0061370668084162567288 -0.0078191679142604834235 -0.30955891249843808799 -0.01638185219053671024;-0.09957007394755228169 0.018461203541681427825 -0.042192849906383854408 -0.21933454024129242499 -0.11839911138602196572 0.069783514704490900993 -0.035368334531524145414 -0.013942812091874621366 -0.013090892679849069208 0.02595063189585232466 -0.018507930172613262787 -0.027354237407296377177 -0.034844099838818767823 -0.039108261474819674963 -0.024372745386248898664 -0.023856371801132699589 -0.050142126649540333383 0.084755213891318972874 -0.058382538179822113245 -0.026901516472347761916 0.053215128554937742023 -0.1166342088783180464 -0.14213352082745309146 -0.0591491017224307844 0.07600138266910064222 -0.026683498664329782096 -0.053214421909527520604 -0.035090058892972723903 0.0048785114860137685985 -0.7260250323104453507 -0.057111455684558332102;0.074056858260833399732 0.18409368095616387984 -0.054410521133130669569 -0.11517256356882274448 -0.096606816019474586743 -0.0033866433321188202377 -0.050661668383176157449 -0.034767445433570465241 -0.058378333177640837071 -0.14440631670046899515 -0.0021859344374363367733 -0.059280651284270229062 -0.022425775455031299321 -0.060187066162229879707 -0.04710913643936974482 -0.13031138693103377912 -0.054093597030386991742 -0.055881552868448612637 -0.13507372271076983905 -0.060180162431007745705 -0.069733221703760672749 -0.12907483354632232064 0.1400644335579205868 0.074783719183938002217 -0.060366901906373372777 -0.050375361673254522021 0.0085732333034757215312 -0.011724188449329252595 -0.054525173752394934246 0.27128375021201850403 -0.019509074211260767073;0.002612532733121980099 -0.00076915487300566773125 0.7737903861004645778 -0.0017533765836832164095 0.0014204466363782152199 0.018305545573902154421 0.013457554846785952166 0.022678997288676897709 0.0047123056130105415995 -0.010809721041636301611 0.0044851633158338576751 0.013191281499930923929 0.0062603288199640236625 0.012933533400272406028 0.01257471754536059437 -0.014851528791784038633 0.018120370942972360145 -0.0021717912378703347134 0.019724572660980987937 0.0069082903366826167724 0.0055738238689162899336 0.0016674902169340525236 0.00038761005287081480618 -0.00031621954296572626995 0.0017335750595126996759 0.023347732688429729403 0.0015797524719688279746 -0.0032629765933750135183 0.0024695665974112379626 -1.2431322934799000635 0.016926542281920291949;-0.073056872985133913811 0.20732128722180437341 0.077724686014877170104 -0.11980860155414545243 0.038235166717253792068 0.22154009141603442368 -0.085333754124567021138 -0.080981824644814584535 -0.07606103236326891559 0.13731001595120903569 -0.064282743816747284216 -0.13152721595856342596 0.010187726546676760531 -0.042820808572064647524 -0.068855338405893570797 0.15378252432632244506 -0.10754096754914445333 0.12694885703981637071 0.023359437892905829393 0.084500172606745402315 -0.10420541496737792397 -0.14537616013732052034 -0.15001809359246168207 -0.078359600954247890514 0.0435006270221306654 -0.0850484171737544703 0.05378555164714411696 0.039409985896983537601 -0.10954297693647160883 0.58999951902418701355 0.02029595642254978724;-0.00059259870084101202211 0.00092881546265016702753 0.77522178968838895141 0.00016064558755756754536 -0.00018478374530461641294 -0.030598632173705578308 0.0024059349487173331897 0.0021279869624629076628 -0.00078475443228629099355 -8.0255174370004597143e-05 0.003742188923073627542 0.0041279670751948735127 -0.00038578856049776438526 -0.0028011925679543589821 0.00086128210599009972451 0.048796899505745089387 -0.00093189273884643870297 -0.00024206010220462675702 -0.048457257712802730143 9.846357830175329548e-05 0.004950752570853058504 -0.00034194507155345529262 -0.0002149082884139263505 0.00018946600180344235604 0.00036884068101104226225 -0.0061982466729827365159 -0.00010573325842586666951 0.00044061911701320669119 0.014328664979031511748 0.025833603512117948864 -0.00089490334378106845253;0.00039571224640348604332 -0.00082159419614171878745 0.79254524063642428633 0.00018036462967901189061 -3.928611370507676309e-06 -0.091026590054252592976 -0.0047105096063237506324 -0.010749791025695620839 0.0006802551122283152351 0.0048503247373285094876 -0.0085300788641482268998 -0.012044053514698947402 -0.0004994016248527008428 0.0042741341052802061737 -0.0073254254831166647211 0.1558153679261766178 -0.0029287472222416502041 0.000835899349100315903 -0.14733133413137816659 -0.0029392236002162746081 -0.021319193566239603987 8.3896239352715176458e-05 2.4593513925335827065e-05 -0.0002806284078552845904 -0.0009046229378895409871 0.0080820251394452414379 -0.00016597820624129653124 0.000297227375837841052 -0.04340985296734151816 1.7925775271779340603 -0.0019318657109058622306;0.0023987360175020673407 -0.00052259609867925048941 -0.67946372706041791023 -0.0013502678208501619778 0.0012272093778747073748 -0.085021902153656556123 0.0098507288323056146212 0.016333155922722882719 0.004676159369655636007 -0.0058041667609387758917 -0.00011733696063265118732 0.0055157192903220056759 0.0057174491615714232232 0.016225995738218774306 0.0049454508850957238156 0.15945766158250324063 0.015660784690308775929 -0.0017044099807239341832 -0.14692572897792083308 0.0038321058776862389379 -0.016290121340705090297 0.0016837253140077599635 0.00045250612239945627339 -0.00029564009886232225444 0.0014063537781730038427 0.028088592325408664324 0.0014512393952346160867 -0.002555158891202966541 -0.035725252529013977465 2.3904657932142829857 0.014747704154127440346;0.0049734020851006028111 -0.00055748089489011443988 0.55482709023647402979 -0.003850692020665031929 0.0030404922847050894728 0.014531649833887409426 0.040266594942716942007 0.056799769538243248534 0.0085156880381912162387 -0.027544710221330696853 0.02088916444098750172 0.042078032258737019244 0.012384545912074794438 0.019463065120190418261 0.03417016720782458522 0.003406393797802666993 0.039203801254347976635 -0.0065403836645922617393 0.0042221663448205274533 0.016820206098963657454 0.033326375722602302742 0.0031697958829559956355 0.00099661691052214127287 -0.00038885916141862816387 0.0041430366388593353397 0.034621634251735596 0.0024595313625409087957 -0.0074904784049895853371 0.052109156203578491096 0.26155341592402719941 0.036604277308231562837;0.04064243633127726657 -0.11797855120455157107 0.033379214821225695886 -0.026338497593019174342 0.038021626831836977112 -0.073096742236423553618 -0.27283517867640028065 -0.32703652458535481529 -0.15585924003742401833 -0.077545947718779678626 -0.14734021145970743749 -0.18968727120577963396 -0.22231406231690412079 -0.22337275669063416661 -0.20309472052337881887 -0.025156459340869602448 -0.16914799798053473112 -0.075427337037016525811 -0.056654318566946818003 -0.055984842508364968117 -0.24836708548910488292 0.0027344052856316226029 0.024112712069916778651 -0.035458183508487353675 -0.091879510717416110199 -0.29227552203874906933 -0.12840695813588182128 -0.068230145578545370322 -0.47478296059988267519 -0.18724403490920615845 -0.21678133317602110708];

% Layer 2
b2 = 1.1040665460845142665;
LW2_1 = [0.00019695834568252327634 0.00014167764763770723541 -9.5984028331728599875e-05 0.72243903011934518243 -0.00042243052120026258799 0.65449576413173637945 1.2169912016451667203 -3.4059352346810856105 -0.26038568999645650415 0.57031141199146939691];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.0200234875508972;
y1_step1.xoffset = 1.3618;

% ===== SIMULATION ========

% Dimensions
Q = size(x1,1); % samples

% Input 1
x1 = x1';
xp1 = mapminmax_apply(x1,x1_step1);

% Layer 1
a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*xp1);

% Layer 2
a2 = repmat(b2,1,Q) + LW2_1*a1;

% Output 1
y1 = mapminmax_reverse(a2,y1_step1);
y1 = y1';
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
y = bsxfun(@minus,x,settings.xoffset);
y = bsxfun(@times,y,settings.gain);
y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
x = bsxfun(@minus,y,settings.ymin);
x = bsxfun(@rdivide,x,settings.gain);
x = bsxfun(@plus,x,settings.xoffset);
end
